@using Newtonsoft.Json;
@using System.Web;
@inject APIService ap
@inject DbService ds
@inject ProtectedLocalStorage localStorage
@inject IMessageService _message
@inject INotificationService _notice

@{
    RenderFragment footer =
    @<Template>
        <Button OnClick="()=>{_obj.Status=Status.OnProgress; DoSubmit();}" Class="btn-warning">
            On Progress
        </Button>

        <Button OnClick="()=>{_obj.Status=Status.WaitingApprove; DoSubmit();}" Type="primary">
            Done
        </Button>
        @if (User.SEC >= 50)
                    {
        <Popconfirm OnConfirm="DoApprove" Title="Confirm Copy to Tourplan?">
            <Button Class="btn-approve">
                Approve
            </Button>
        </Popconfirm>
                    }
        <Button OnClick="()=>IsShowForm=false" @key="@( "back" )">Close</Button>
    </Template>;
}

<div class="card mt-2">
    <div class="card-header bg-warning">
        Amend
    </div>
    <div class="card-body">
        <Table DataSource="AmendData" Size="TableSize.Small" ScrollY="400" PageSize="100">
            <ActionColumn Width="100">
                <Button OnClick="()=>Edit(context.Id)" Icon="edit">Edit</Button>
                @* <a href="/Form/@(context.Id)" target="_blank"><Button Icon="edit">Edit</Button></a> *@
            </ActionColumn>
            <ActionColumn Width="100">
                <Button OnClick="()=>Copy(context)" Icon="copy">Copy</Button>
                @* <a href="/Form/@(context.Id)" target="_blank"><Button Icon="edit">Edit</Button></a> *@
            </ActionColumn>
            <PropertyColumn Width="190" Property="c=>c.OptionCode" Filterable Sortable></PropertyColumn>
             <PropertyColumn Property="c=>c.Date_From" Format="dd/MM/yyyy" Filterable Sortable></PropertyColumn>
             <PropertyColumn Property="c=>c.Date_To" Format="dd/MM/yyyy" Filterable Sortable></PropertyColumn>
             <PropertyColumn Property="c=>c.Price_Code" Title="Price Code" Filterable>
                <Tooltip>
                    <TitleTemplate>
                        @{
                            var dateRange = JsonConvert.DeserializeObject<DateRange>(context.JsonData);
                            if (dateRange != null)
                            {
                                <ul>
                                    @foreach (var dr in dateRange.RateSet)
                                    {


                                        <li>@dr.Rate_Text</li>

                                    }
                                </ul>
                            }
                        }
                    </TitleTemplate>
                    <ChildContent>
                        <Tag>@context.Price_Code</Tag>
                    </ChildContent>
                </Tooltip>

            </PropertyColumn>
            <PropertyColumn Property="c=>c.LastUpdated" Format="dd/MM/yyyy HH:mm"></PropertyColumn>
            <PropertyColumn Property="c=>c.Status" Filterable>

                @if (context.Status == Status.New)
                {
                    <Tag Color="green">@context.Status</Tag>

                }
                else if (context.Status == Status.OnProgress)
                {
                    <Tag Color="orange">@context.Status</Tag>
                }
                else
                {
                    <Tag Color="blue">@context.Status</Tag>
                }

            </PropertyColumn>
            <PropertyColumn Property="c=>c.Note" Ellipsis></PropertyColumn>
             <ActionColumn Width="50">
                 <Popconfirm Title="Confirm Delete?" OnConfirm="()=> Delete(context.Id)">
                     <Button Danger Icon="delete"></Button>
                 </Popconfirm>
             </ActionColumn>
         </Table>
     </div>
 </div>

 <Modal Visible="IsShowForm" Maximizable="@true" OnCancel="()=>IsShowForm=false" OnOk="DoSubmit" Footer="@footer"
        Centered="@true"
        DefaultMaximized="@true">
     <label>NOTE:</label>
     <Input @bind-Value="_obj.Note" Class="mb-1"></Input>

     <Form Model="_data" Loading="IsLoading" Layout="" OnFinish="DoSave" @ref="_form" LabelColSpan="8"
           WrapperColSpan="16">

         <div class="row">
             <div class="col-sm-6">
                 <FormItem Label="Supplier" Class="mb-1">

                     @_optionDetail?.GetOptionReply?.OptionData[0]?.OptionGeneralData.Invoice_Text1

                 </FormItem>
                 <FormItem Label="Option" Class="mb-1">

                     @_optionDetail?.GetOptionReply?.OptionData[0]?.OptionGeneralData?.Description<br />
                     @_optionDetail?.GetOptionReply?.OptionData[0]?.OptionGeneralData?.Comment
                 </FormItem>
                 <FormItem Label="OptionCode" Class="mb-1">

                     <Input @bind-Value="context.OptionCode" class="upper form-control" @onblur="CheckOption" Style="max-width:calc(100% - 40px); text-transform:uppercase;"  /><Button Class="btn btn-success" OnClick="ShowCodeList" Icon="search"></Button>


                 </FormItem>
                 <FormItem Label="Price Code" Class="mb-1 upper">
                     <Select DataSource="_priceCodeList" @bind-Value="context.Price_Code" TItem="PriceCode" TItemValue="string" EnableSearch
                             LabelName="@nameof(PriceCode.label)" ValueName="@nameof(PriceCode.Code)"></Select>

                 </FormItem>

                 <FormItem Label="Buy Currency" Class="mb-1">
                     <Input @bind-Value="context.Buy_Currency" ReadOnly="true" />
                 </FormItem>
                 <FormItem Label="Sell Currency" Class="mb-1">
                     <Input @bind-Value="context.Sell_Currency" ReadOnly="true" />
                 </FormItem>
             </div>
             <div class="col-sm-6">
                 <FormItem Label="TRAVEL DATE FROM" Class="mb-1">
                     <DatePicker @bind-Value="context.Date_From" Format="dd/MM/yyyy" />
                 </FormItem>
                 <FormItem Label="TRAVEL DATE TO" Class="mb-1">
                     <DatePicker @bind-Value="context.Date_To" Format="dd/MM/yyyy" />
                 </FormItem>
                 <FormItem Label="SALE DATE FROM" Class="mb-1">
                     <DatePicker @bind-Value="context.Sale_From" AllowClear=false Format="dd/MM/yyyy" />
                 </FormItem>
                 <FormItem Label="SALE DATE TO" Class="mb-1">
                     <DatePicker @bind-Value="context.Sale_To" AllowClear=false Format="dd/MM/yyyy" />
                 </FormItem>
                 <FormItem Label="SELL BEFORE TRAVEL" Class="mb-1">
                     <AntDesign.InputNumber @bind-Value="context.SellBeforeTravel" Min="0" />
                     <SimpleSelect DefaultValue="context.SellBeforeType" Style="width:150px">
                         <SelectOptions>
                             <SimpleSelectOption Value="D" Label="days"></SimpleSelectOption>
                             <SimpleSelectOption Value="M" Label="months"></SimpleSelectOption>
                             <SimpleSelectOption Value="Y" Label="years"></SimpleSelectOption>
                         </SelectOptions>
                     </SimpleSelect>
                 </FormItem>

             </div>
         </div>
         <Tabs Animated>
             @{
                var ratesetSorted = context.RateSet.OrderBy(o => o.Min_SCU).ToList();
            }
            @foreach (var rate in ratesetSorted)
            {
                var rateMaster = _dataMaster.RateSet.Where(w => w.Key == rate.Key).FirstOrDefault();
                <TabPane Tab="@rate.Stay_Type">
                    <div class="row">
                        <div class="col-sm-12">
                            <Button OnClick="()=>DoCopy(rate)" Icon="copy">Copy</Button>

                            @if (_data.RateSet.Count > 1)
                            {
                                <Popconfirm Title="Confirm Delete Rate?" OnConfirm="()=>DoDelete(rate)">
                                    <Button Danger Icon="delete">Delete</Button>
                                 </Popconfirm>
                            }

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <FormItem Label="RATE NAME" Class="mb-1">
                                <Input @bind-Value="rate.Stay_Type" MaxLength="20" />
                            </FormItem>
                            <FormItem Label="RATE NAME2" Class="mb-1">
                                <Input @bind-Value="rate.Stay_Type2" MaxLength="20" />
                            </FormItem>
                            <FormItem Label="STAY LENGTH MIN" Class="mb-1">
                                <AntDesign.InputNumber @bind-Value="rate.Min_SCU" Min="0" Max="999999" />MAX <AntDesign.InputNumber @bind-Value="rate.Max_SCU" Min="0" Max="999999" />
                            </FormItem>
                        </div>
                        <div class="col-sm-6">
                            <FormItem Label="RATE TEXT" Class="mb-1">
                                <Input @bind-Value="rate.Rate_Text" MaxLength="60" />
                            </FormItem>
                            <FormItem Label="RATE TEXT2" Class="mb-1">
                                <Input @bind-Value="rate.Rate_Text2" MaxLength="60" />
                            </FormItem>

                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                            <h6 class="upper">APPLY FOR</h6>
                            <FormItem Label="MON" Class="mb-0">

                                <Checkbox @bind-Checked="rate.Apply_Mon_chk" />
                            </FormItem>
                            <FormItem Label="TUE" Class="mb-0">

                                <Checkbox @bind-Checked="rate.Apply_Tue_chk" />
                            </FormItem>
                            <FormItem Label="WED" Class="mb-0">

                                <Checkbox @bind-Checked="rate.Apply_Wed_chk" />
                            </FormItem>
                            <FormItem Label="THU" Class="mb-0">

                                <Checkbox @bind-Checked="rate.Apply_Thu_chk" />
                            </FormItem>
                            <FormItem Label="FRI" Class="mb-0">

                                <Checkbox @bind-Checked="rate.Apply_Fri_chk" />
                            </FormItem>
                            <FormItem Label="SAT" Class="mb-0">

                                <Checkbox @bind-Checked="rate.Apply_Sat_chk" />
                            </FormItem>
                            <FormItem Label="SUN" Class="mb-0">

                                <Checkbox @bind-Checked="rate.Apply_Sun_chk" />
                            </FormItem>
                        </div>
                        <div class="col-sm-4">
                            <h6 class="upper">RATE STATUS</h6>
                            <RadioGroup @bind-Value="@rate.Prov">
                                <Radio Style="@styleRadio" Value="@("K")">CONFIRMED</Radio>
                                <Radio Style="@styleRadio" Value="@("P")">PROVISIONAL</Radio>
                                <Radio Style="@styleRadio" Value="@("T")">TERMINAL</Radio>
                                <Radio Style="@styleRadio" Value="@("C")">CLOSED</Radio>
                                <Radio Style="@styleRadio" Value="@("M")">MANUAL</Radio>
                            </RadioGroup>
                        </div>
                        <div class="col-sm-4">
                            <h6 class="upper">OPERATIONAL SETTINGS</h6>

                            <FormItem Label="COMMISSIONABLE" Class="mb-0">

                                <Checkbox @bind-Checked="@rate.Commissionable_chk" />
                            </FormItem>
                            <FormItem Label="COMMISSION OVERRIDE" Class="mb-0">

                                <AntDesign.InputNumber @bind-Value="@rate.Comm_Oride" Min="0" />
                            </FormItem>
                            <FormItem Label="PREFERENCE" Class="mb-0">

                                <AntDesign.InputNumber @bind-Value="@rate.Prefer" Min="0" />
                            </FormItem>
                            <FormItem Label="CANCELLATION HOURS" Class="mb-0">

                                <AntDesign.InputNumber @bind-Value="@rate.Cancel_Hours" Min="0" />
                            </FormItem>

                        </div>
                    </div>


                    <div class="alart alert-warning text-end pe-3">
                        MARK UP/DISCOUNT <AntDesign.InputNumber @bind-Value="rate.MarkupPercent" Min="-100" Max="100" Size="@InputSize.Small" Style="background-color:#FFF"></AntDesign.InputNumber>%
                        or AMOUNT
                        <AntDesign.InputNumber Size="@InputSize.Small" @bind-Value="rate.MarkupAmount" Style="background-color:#FFF"></AntDesign.InputNumber> <Button OnClick="()=>DoMarkup(rate)">Calculate</Button>
                    </div>
                    <table class="table table-striped table-bordered">

                        <thead>
                            <tr>
                                <th>SERVICE ITEM</th>
                                <th width="30"></th>
                                <th width="120">
                                    Original<br>
                                    @context.Buy_Currency<br>
                                    GROUP COST
                                </th>
                                <th width="120">
                                    New<br>
                                    @context.Buy_Currency<br>
                                    GROUP COST
                                </th>
                                <th width="120">
                                    Original<br>
                                    @context.Sell_Currency<br>
                                    GROUP SELL
                                </th>
                                <th width="120">
                                    New<br>
                                    @context.Sell_Currency<br>
                                    GROUP SELL
                                </th>
                                <th width="120">
                                    Original<br>
                                    @context.Buy_Currency<br>
                                    FIT COST
                                </th>
                                <th width="120">
                                    New<br>
                                    @context.Buy_Currency<br>
                                    FIT COST
                                </th>
                                <th width="120">
                                    Original<br>
                                    @context.Sell_Currency<br>
                                    FIT SELL
                                </th>
                                <th width="120">
                                    New<br>
                                    @context.Sell_Currency<br>
                                    FIT SELL
                                </th>
                            </tr>
                        </thead>

                        <tbody>
                            @if (rate.GroupCost.Rates.AdultRate != null)
                            {
                                <tr>
                                    <td>
                                        ADULT AD
                                    </td>
                                    <td>
                                        <Checkbox @bind-Checked="rate.GroupCost.Rates.AdultRateApply"></Checkbox>
                                    </td>
                                    <td>
                                        @rateMaster.GroupCost.Rates.AdultRate?.ToString("N2")
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.AdultRate"
                                                               Min="0"
                                                               Size="@InputSize.Small"
                                                               Precision="2"
                                                               Style="width:100%"
                                                               TValue="double?" OnChange="(e) => {rate.GroupSell.Rates.AdultRate = e.Value;rate.FITCost.Rates.AdultRate = e.Value;rate.FITSell.Rates.AdultRate = e.Value;} " />
                                    </td>
                                    <td>
                                        @rateMaster.GroupSell.Rates.AdultRate?.ToString("N2")
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.AdultRate"
                                                               Min="0"
                                                               Size="@InputSize.Small"
                                                               Precision="2"
                                                               Style="width:100%"
                                                               TValue="double?" OnChange="(e) => {rate.FITCost.Rates.AdultRate = e.Value;rate.FITSell.Rates.AdultRate = e.Value;} " />
                                    </td>
                                    <td>
                                        @rateMaster.FITCost.Rates.AdultRate?.ToString("N2")
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.AdultRate"
                                                               Min="0"
                                                               Size="@InputSize.Small"
                                                               Precision="2"
                                                               Style="width:100%"
                                                               TValue="double?" OnChange="(e) => {rate.FITSell.Rates.AdultRate = e.Value;} " />
                                    </td>
                                    <td>
                                        @rateMaster.FITSell.Rates.AdultRate?.ToString("N2")
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.AdultRate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                    </td>
                                </tr>

                            }
                            @if (rate.GroupCost.Rates.PaxBreakRate != null)
                            {
                                var opx = @_optionDetail.GetOptionReply.OptionData[0].OptionCostData;
                                if (opx.Pxb1 > 0)
                                {
                                    <tr>
                                        <td>
                                            1-@opx.Pxb1 AD
                                        </td>
                                        <td>
                                            <Checkbox @bind-Checked="rate.GroupCost.Rates.PaxBreakRate.Price_Pxb1Apply"></Checkbox>
                                        </td>
                                        <td>
                                            @rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb1.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.PaxBreakRate.Price_Pxb1" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.PaxBreakRate.Price_Pxb1=e;rate.FITCost.Rates.PaxBreakRate.Price_Pxb1=e;rate.FITSell.Rates.PaxBreakRate.Price_Pxb1=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb1.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.PaxBreakRate.Price_Pxb1" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.PaxBreakRate.Price_Pxb1=e;rate.FITSell.Rates.PaxBreakRate.Price_Pxb1=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb1.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.PaxBreakRate.Price_Pxb1" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.PaxBreakRate.Price_Pxb1=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb1.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.PaxBreakRate.Price_Pxb1" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }
                                if (opx.Pxb2 > 0)
                                {
                                    <tr>
                                        <td>
                                            @(opx.Pxb1 + 1)-@opx.Pxb2 AD
                                        </td>
                                        <td>
                                            <Checkbox @bind-Checked="rate.GroupCost.Rates.PaxBreakRate.Price_Pxb2Apply"></Checkbox>
                                        </td>
                                        <td>
                                            @rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb2.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.PaxBreakRate.Price_Pxb2" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.PaxBreakRate.Price_Pxb2=e;rate.FITCost.Rates.PaxBreakRate.Price_Pxb2=e;rate.FITSell.Rates.PaxBreakRate.Price_Pxb2=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb2.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.PaxBreakRate.Price_Pxb2" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.PaxBreakRate.Price_Pxb2=e;rate.FITSell.Rates.PaxBreakRate.Price_Pxb2=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb2.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.PaxBreakRate.Price_Pxb2" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.PaxBreakRate.Price_Pxb2=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb2.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.PaxBreakRate.Price_Pxb2" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }
                                if (opx.Pxb3 > 0)
                                {
                                    <tr>
                                        <td>
                                            @(opx.Pxb2 + 1)-@opx.Pxb3 AD
                                        </td>
                                        <td>
                                            <Checkbox @bind-Checked="rate.GroupCost.Rates.PaxBreakRate.Price_Pxb3Apply"></Checkbox>
                                        </td>
                                        <td>
                                            @rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb3.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.PaxBreakRate.Price_Pxb3" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.PaxBreakRate.Price_Pxb3=e;rate.FITCost.Rates.PaxBreakRate.Price_Pxb3=e;rate.FITSell.Rates.PaxBreakRate.Price_Pxb3=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb3.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.PaxBreakRate.Price_Pxb3" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.PaxBreakRate.Price_Pxb3=e;rate.FITSell.Rates.PaxBreakRate.Price_Pxb3=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb3.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.PaxBreakRate.Price_Pxb3" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.PaxBreakRate.Price_Pxb3=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb3.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.PaxBreakRate.Price_Pxb3" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }
                                if (opx.Pxb4 > 0)
                                {
                                    <tr>
                                        <td>
                                            @(opx.Pxb3 + 1)-@opx.Pxb4 AD
                                        </td>
                                        <td>
                                            <Checkbox @bind-Checked="rate.GroupCost.Rates.PaxBreakRate.Price_Pxb4Apply"></Checkbox>
                                        </td>
                                        <td>
                                            @rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb4.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.PaxBreakRate.Price_Pxb4" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.PaxBreakRate.Price_Pxb4=e;rate.FITCost.Rates.PaxBreakRate.Price_Pxb4=e;rate.FITSell.Rates.PaxBreakRate.Price_Pxb4=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb4.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.PaxBreakRate.Price_Pxb4" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.PaxBreakRate.Price_Pxb4=e;rate.FITSell.Rates.PaxBreakRate.Price_Pxb4=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb4.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.PaxBreakRate.Price_Pxb4" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.PaxBreakRate.Price_Pxb4=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb4.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.PaxBreakRate.Price_Pxb4" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }
                                if (opx.Pxb5 > 0)
                                {
                                    <tr>
                                        <td>
                                            @(opx.Pxb4 + 1)-@opx.Pxb5 AD
                                        </td>
                                        <td>
                                            <Checkbox @bind-Checked="rate.GroupCost.Rates.PaxBreakRate.Price_Pxb5Apply"></Checkbox>
                                        </td>
                                        <td>
                                            @rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb5.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.PaxBreakRate.Price_Pxb5" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.PaxBreakRate.Price_Pxb5=e;rate.FITCost.Rates.PaxBreakRate.Price_Pxb5=e;rate.FITSell.Rates.PaxBreakRate.Price_Pxb5=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb5.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.PaxBreakRate.Price_Pxb5" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.PaxBreakRate.Price_Pxb5=e;rate.FITSell.Rates.PaxBreakRate.Price_Pxb5=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb5.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.PaxBreakRate.Price_Pxb5" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.PaxBreakRate.Price_Pxb5=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb5.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.PaxBreakRate.Price_Pxb5" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }

                            }
                            @if (rate.GroupCost.Rates.RoomRate != null)
                            {
                                if (rateMaster.GroupCost.Rates.RoomRate.TW != null)
                                {
                                    <tr>
                                        <td>
                                            TWIN/DOUBLE ROOM
                                        </td>
                                        <td>
                                            <Checkbox @bind-Checked="rate.GroupCost.Rates.RoomRate.TWApply"></Checkbox>
                                        </td>
                                        <td>
                                            @rateMaster.GroupCost.Rates.RoomRate.TW?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.RoomRate.TW" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double?"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.RoomRate.TW=e; rate.FITCost.Rates.RoomRate.TW=e; rate.FITSell.Rates.RoomRate.TW=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.RoomRate.TW?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.RoomRate.TW" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double?"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.RoomRate.TW=e; rate.FITSell.Rates.RoomRate.TW=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.RoomRate.TW?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.RoomRate.TW" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double?"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.RoomRate.TW=e; rate.FITSell.Rates.RoomRate.TW=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.RoomRate.TW?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.RoomRate.TW" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }

                                if (rateMaster.GroupCost.Rates.RoomRate.SG != null)
                                {
                                    <tr>
                                        <td>
                                            SINGLE ROOM
                                        </td>
                                        <td>
                                            <Checkbox @bind-Checked="rate.GroupCost.Rates.RoomRate.SGApply"></Checkbox>
                                        </td>
                                        <td>
                                            @rateMaster.GroupCost.Rates.RoomRate.SG?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.RoomRate.SG" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double?"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.RoomRate.SG=e; rate.FITCost.Rates.RoomRate.SG=e; rate.FITSell.Rates.RoomRate.SG=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.RoomRate.SG?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.RoomRate.SG" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double?"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.RoomRate.SG=e; rate.FITSell.Rates.RoomRate.SG=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.RoomRate.SG?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.RoomRate.SG" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double?"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.RoomRate.SG=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.RoomRate.SG?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.RoomRate.SG" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }
                                if (rateMaster.GroupCost.Rates.RoomRate.TR != null)
                                {
                                    <tr>
                                        <td>
                                            TRIPLE ROOM
                                        </td>
                                        <td>
                                            <Checkbox @bind-Checked="rate.GroupCost.Rates.RoomRate.TRApply"></Checkbox>
                                        </td>
                                        <td>
                                            @rateMaster.GroupCost.Rates.RoomRate.TR?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.RoomRate.TR" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double?"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.RoomRate.TR=e; rate.FITCost.Rates.RoomRate.TR=e; rate.FITSell.Rates.RoomRate.TR=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.RoomRate.TR?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.RoomRate.TR" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double?"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.RoomRate.TR=e; rate.FITSell.Rates.RoomRate.TR=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.RoomRate.TR?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.RoomRate.TR" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double?"
                                                                   OnChange="(e)=>{ rate.FITSell.Rates.RoomRate.TR=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.RoomRate.TR?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.RoomRate.TR" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }
                                if (rateMaster.GroupCost.Rates.RoomRate.QD != null)
                                {
                                    <tr>
                                        <td>
                                            QUAD ROOM
                                        </td>
                                        <td>
                                            <Checkbox @bind-Checked="rate.GroupCost.Rates.RoomRate.QDApply"></Checkbox>
                                        </td>
                                        <td>
                                            @rateMaster.GroupCost.Rates.RoomRate.QD?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.RoomRate.QD" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double?"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.RoomRate.QD=e; rate.FITCost.Rates.RoomRate.QD=e; rate.FITSell.Rates.RoomRate.QD=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.RoomRate.QD?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.RoomRate.QD" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double?"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.RoomRate.QD=e; rate.FITSell.Rates.RoomRate.QD=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.RoomRate.QD?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.RoomRate.QD" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double?"
                                                                   OnChange="(e)=>{ rate.FITSell.Rates.RoomRate.QD=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.RoomRate.QD?.ToString("N2")
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.RoomRate.QD" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }
                                <tr>
                                    <td>
                                        ADDITIONAL ADULT
                                    </td>
                                    <td>
                                        <Checkbox @bind-Checked="rate.GroupCost.Rates.RoomRate.AAApply"></Checkbox>
                                    </td>
                                    <td>
                                        @rateMaster.GroupCost.Rates.RoomRate.AA.ToString("N2")
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.RoomRate.AA" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                               TValue="double"
                                                               OnChange="(e)=>{rate.GroupSell.Rates.RoomRate.AA=e; rate.FITCost.Rates.RoomRate.AA=e; rate.FITSell.Rates.RoomRate.AA=e;}" />
                                    </td>
                                    <td>
                                        @rateMaster.GroupSell.Rates.RoomRate.AA.ToString("N2")
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.RoomRate.AA" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                               TValue="double"
                                                               OnChange="(e)=>{rate.FITCost.Rates.RoomRate.AA=e; rate.FITSell.Rates.RoomRate.AA=e;}" />
                                    </td>
                                    <td>
                                        @rateMaster.FITCost.Rates.RoomRate.AA.ToString("N2")
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.RoomRate.AA" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                               TValue="double"
                                                               OnChange="(e)=>{ rate.FITSell.Rates.RoomRate.AA=e;}" />
                                    </td>
                                    <td>
                                        @rateMaster.FITSell.Rates.RoomRate.AA.ToString("N2")
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.RoomRate.AA" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                    </td>
                                </tr>


                            }

                            <tr>
                                <td>
                                    CHILD CH
                                </td>
                                <td>
                                    <Checkbox @bind-Checked="rate.GroupCost.Rates.ChildRateApply" />
                                </td>
                                <td>
                                    @rateMaster.GroupCost.Rates.ChildRate.ToString("N2")
                                </td>
                                <td>
                                    <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.ChildRate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" TValue="double"
                                                           OnChange="(e)=>{rate.GroupSell.Rates.ChildRate=e; rate.FITCost.Rates.ChildRate=e; rate.FITSell.Rates.ChildRate=e;}" />
                                </td>
                                <td>
                                    @rateMaster.GroupSell.Rates.ChildRate.ToString("N2")
                                </td>
                                <td>
                                    <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.ChildRate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                           TValue="double"
                                                           OnChange="(e)=>{rate.FITCost.Rates.ChildRate=e; rate.FITSell.Rates.ChildRate=e;}" />
                                </td>
                                <td>
                                    @rateMaster.FITCost.Rates.ChildRate.ToString("N2")
                                </td>
                                <td>
                                    <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.ChildRate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" TValue="double"
                                                           OnChange="(e)=>{rate.FITSell.Rates.ChildRate=e;}" />
                                </td>
                                <td>
                                    @rateMaster.FITSell.Rates.ChildRate.ToString("N2")
                                </td>
                                <td>
                                    <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.ChildRate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    INFANT IN
                                </td>
                                <td>
                                    <Checkbox @bind-Checked="rate.GroupCost.Rates.InfantRateApply" />
                                </td>
                                <td>
                                    @rateMaster.GroupCost.Rates.InfantRate.ToString("N2")
                                </td>

                                <td>
                                    <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.InfantRate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                           TValue="double"
                                                           OnChange="(e)=>{rate.GroupSell.Rates.InfantRate=e; rate.FITCost.Rates.InfantRate=e; rate.FITSell.Rates.InfantRate=e;}" />
                                </td>
                                <td>
                                    @rateMaster.GroupSell.Rates.InfantRate.ToString("N2")
                                </td>
                                <td>
                                    <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.InfantRate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                           TValue="double"
                                                           OnChange="(e)=>{rate.FITCost.Rates.InfantRate=e; rate.FITSell.Rates.InfantRate=e;}" />
                                </td>
                                <td>
                                    @rateMaster.FITCost.Rates.InfantRate.ToString("N2")
                                </td>
                                <td>
                                    <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.InfantRate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                           TValue="double"
                                                           OnChange="(e)=>{rate.FITSell.Rates.InfantRate=e;}" />
                                </td>
                                <td>
                                    @rateMaster.FITSell.Rates.InfantRate.ToString("N2")
                                </td>
                                <td>
                                    <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.InfantRate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                </td>
                            </tr>


                            @if (rate.GroupCost.Rates.Extras != null)
                            {
                                if (!string.IsNullOrEmpty(_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex1))
                                {
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex1 AD</td>
                                        <td>
                                           
                                            <Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Apply"></Checkbox>
                                         </td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate=e; rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate=e;rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate=e;rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex1 CH</td>
                                        <td>
                                          
                                            <Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate=e; rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate=e;rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate=e;rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex1 IN</td>
                                        <td><Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate=e; rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate=e;rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate=e;rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }
                                if (!string.IsNullOrEmpty(_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex2))
                                {
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex2 AD</td>
                                        <td><Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate=e; rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate=e;rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate=e;rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex2 CH</td>
                                        <td><Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate=e; rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate=e;rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate=e;rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex2 IN</td>
                                        <td><Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate=e; rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate=e;rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate=e;rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }
                                if (!string.IsNullOrEmpty(_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex3))
                                {
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex3 AD</td>
                                        <td><Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate=e; rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate=e;rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate=e;rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex3 CH</td>
                                        <td><Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate=e; rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate=e;rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate=e;rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex3 IN</td>
                                        <td><Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate=e; rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate=e;rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate=e;rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }
                                if (!string.IsNullOrEmpty(_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex4))
                                {
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex4 AD</td>
                                        <td><Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate=e; rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate=e;rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate=e;rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex4 CH</td>
                                        <td><Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate=e; rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate=e;rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate=e;rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex4 IN</td>
                                        <td><Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate=e; rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate=e;rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate=e;rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }
                                if (!string.IsNullOrEmpty(_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex5))
                                {
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex5 AD</td>
                                        <td><Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate=e; rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate=e;rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate=e;rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex5 CH</td>
                                        <td><Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate=e; rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate=e;rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate=e;rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td> @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex5 IN</td>
                                        <td><Checkbox @bind-Checked="rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Apply"></Checkbox></td>
                                        <td>

                                            @rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate=e; rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate=e;rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate=e;rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%"
                                                                   TValue="double"
                                                                   OnChange="(e)=>{rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate=e;}" />
                                        </td>
                                        <td>
                                            @rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate
                                        </td>
                                        <td>
                                            <AntDesign.InputNumber @bind-Value="rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate" Min="0" Size="@InputSize.Small" Precision="2" Style="width:100%" />
                                        </td>
                                    </tr>
                                }

                            }
                        </tbody>

                    </table>




                    <div class="row">
                        <div class="col-sm-4">
                            <h6>VOUCHER TEXT</h6>
                            <FormItem Label="Line1" Class="mb-0">
                                <Input @bind-Value="rate.Vtext1" MaxLength="60" />
                            </FormItem>
                            <FormItem Label="Line2" Class="mb-0">
                                <Input @bind-Value="rate.Vtext2" MaxLength="60" />
                            </FormItem>
                            <FormItem Label="Line3" Class="mb-0">
                                <Input @bind-Value="rate.Vtext3" MaxLength="60" />
                            </FormItem>
                            <FormItem Label="Line4" Class="mb-0">
                                <Input @bind-Value="rate.Vtext4" MaxLength="60" />
                            </FormItem>
                            <FormItem Label="Line5" Class="mb-0">
                                <Input @bind-Value="rate.Vtext5" MaxLength="60" />
                            </FormItem>
                            <FormItem Label="Line6" Class="mb-0">
                                <Input @bind-Value="rate.Vtext6" MaxLength="60" />
                            </FormItem>
                            <FormItem Label="Line7" Class="mb-0">
                                <Input @bind-Value="rate.Vtext7" MaxLength="60" />
                            </FormItem>
                            <FormItem Label="Line8" Class="mb-0">
                                <Input @bind-Value="rate.Vtext8" MaxLength="60" />
                            </FormItem>
                            <FormItem Label="Line9" Class="mb-0">
                                <Input @bind-Value="rate.Vtext9" MaxLength="60" />
                            </FormItem>
                            <FormItem Label="Line10" Class="mb-0">
                                <Input @bind-Value="rate.Vtext10" MaxLength="60" />
                            </FormItem>
                        </div>
                        <div class="col-sm-4">
                            <h6>STAY RULES</h6>
                            <table>
                                <tr>
                                    <th>STAY</th>
                                    <th>PAY</th>
                                </tr>
                                <tr>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Stay1" Max="999" />
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Pay1" Max="999" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Stay2" Max="999" />
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Pay2" Max="999" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Stay3" Max="999" />
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Pay3" Max="999" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Stay4" Max="999" />
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Pay4" Max="999" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Stay5" Max="999" />
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Pay5" Max="999" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Stay6" Max="999" />
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Pay6" Max="999" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Stay7" Max="999" />
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Pay7" Max="999" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Stay8" Max="999" />
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Pay8" Max="999" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Stay9" Max="999" />
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Pay9" Max="999" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Stay10" Max="999" />
                                    </td>
                                    <td>
                                        <AntDesign.InputNumber @bind-Value="rate.Pay10" Max="999" />
                                    </td>
                                </tr>
                            </table>

                        </div>
                        <div class="col-sm-4">
                            <h6>STAY PAY TYPE</h6>
                            <Select DataSource="_stayPayTypeList" @bind-Value="rate.StayPayType" TItem="StayPayType" TItemValue="int?" LabelName="@nameof(StayPayType.Name)" ValueName="@nameof(StayPayType.Id)" DefaultValue="1"></Select>
                            <div>EXTRAS CHARGED FOR:</div>
                            @if (_data.ChargeExtra1 != null)
                            {
                                <FormItem Label="" Class="mb-0">
                                    <Checkbox @bind-Checked="_data.ChargeEx1_Check" />  @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex1
                                </FormItem>
                            }

                            @if (_data.ChargeExtra2 != null)
                            {
                                <FormItem Label="" Class="mb-0">
                                    <Checkbox @bind-Checked="_data.ChargeEx2_Check" />  @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex2
                                </FormItem>
                            }

                            @if (_data.ChargeExtra3 != null)
                            {
                                <FormItem Label="" Class="mb-0">
                                    <Checkbox @bind-Checked="_data.ChargeEx3_Check" />  @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex3
                                </FormItem>
                            }

                             @if (_data.ChargeExtra4 != null)
                            {
                                <FormItem Label="" Class="mb-0">
                                    <Checkbox @bind-Checked="_data.ChargeEx4_Check" />  @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex4
                                </FormItem>
                            }

                             @if (_data.ChargeExtra5 != null)
                            {
                                <FormItem Label="" Class="mb-0">
                                    <Checkbox @bind-Checked="_data.ChargeEx5_Check" />  @_optionDetail.GetOptionReply.OptionData[0].OptionCostData.Ex5
                                </FormItem>
                            }
                        </div>
                    </div>
                </TabPane>
            }
        </Tabs>
    </Form>


</Modal>
<Modal Visible="IsShowOption" OnCancel="()=>IsShowOption=false" OnOk="DoSelectOption">
    <Table DataSource="_productList" @bind-SelectedRows="_selectedProduct" Size="TableSize.Small" ScrollY="300px" HidePagination>
        <Selection Key="@(context.Opt_Id.ToString())" Type="radio" />

        <PropertyColumn Property="c=>c.Location"></PropertyColumn>
        <PropertyColumn Property="c=>c.Service"></PropertyColumn>
        <PropertyColumn Property="c=>c.Supplier"></PropertyColumn>
        <PropertyColumn Property="c=>c.Code"></PropertyColumn>

    </Table>

</Modal>

@code {
    void DoMarkup(RateSet rate)
    {

        var rateMaster = _dataMaster.RateSet.Where(w => w.Key == rate.Key).FirstOrDefault();


        var updateNew = rate.GroupCost;
        var updateMaster = rateMaster.GroupCost;

        if (rate.GroupCost.Rates.AdultRate != null)
        {
            if (rate.GroupCost.Rates.AdultRateApply)
            {
                rate.GroupCost.Rates.AdultRate = rateMaster.GroupCost.Rates.AdultRate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.AdultRate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.AdultRate = rateMaster.GroupSell.Rates.AdultRate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.AdultRate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.AdultRate = rateMaster.FITCost.Rates.AdultRate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.AdultRate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.AdultRate = rateMaster.FITSell.Rates.AdultRate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.AdultRate * rate.MarkupPercent) / 100);
            }
           

        }


        if (rate.GroupCost.Rates.ChildRateApply)
        {
            rate.GroupCost.Rates.ChildRate = rateMaster.GroupCost.Rates.ChildRate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.ChildRate * rate.MarkupPercent) / 100);
            rate.GroupSell.Rates.ChildRate = rateMaster.GroupSell.Rates.ChildRate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.ChildRate * rate.MarkupPercent) / 100);
            rate.FITCost.Rates.ChildRate = rateMaster.FITCost.Rates.ChildRate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.ChildRate * rate.MarkupPercent) / 100);
            rate.FITSell.Rates.ChildRate = rateMaster.FITSell.Rates.ChildRate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.ChildRate * rate.MarkupPercent) / 100);
        }
       

        if (rate.GroupCost.Rates.InfantRateApply)
        {
            rate.GroupCost.Rates.InfantRate = rateMaster.GroupCost.Rates.InfantRate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.InfantRate * rate.MarkupPercent) / 100);
            rate.GroupSell.Rates.InfantRate = rateMaster.GroupSell.Rates.InfantRate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.InfantRate * rate.MarkupPercent) / 100);
            rate.FITCost.Rates.InfantRate = rateMaster.FITCost.Rates.InfantRate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.InfantRate * rate.MarkupPercent) / 100);
            rate.FITSell.Rates.InfantRate = rateMaster.FITSell.Rates.InfantRate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.InfantRate * rate.MarkupPercent) / 100);
        }
       

        if (rate.GroupCost.Rates.PaxBreakRate != null)
        {
            if (rate.GroupCost.Rates.PaxBreakRate.Price_Pxb1Apply)
            {
                rate.GroupCost.Rates.PaxBreakRate.Price_Pxb1 = rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb1 + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb1 * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.PaxBreakRate.Price_Pxb1 = rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb1 + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb1 * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.PaxBreakRate.Price_Pxb1 = rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb1 + rate.MarkupAmount + ((rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb1 * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.PaxBreakRate.Price_Pxb1 = rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb1 + rate.MarkupAmount + ((rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb1 * rate.MarkupPercent) / 100);
            }
            

            if (rate.GroupCost.Rates.PaxBreakRate.Price_Pxb2Apply)
            {
                rate.GroupCost.Rates.PaxBreakRate.Price_Pxb2 = rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb2 + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb2 * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.PaxBreakRate.Price_Pxb2 = rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb2 + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb2 * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.PaxBreakRate.Price_Pxb2 = rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb2 + rate.MarkupAmount + ((rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb2 * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.PaxBreakRate.Price_Pxb2 = rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb2 + rate.MarkupAmount + ((rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb2 * rate.MarkupPercent) / 100);
            }
            

            if (rate.GroupCost.Rates.PaxBreakRate.Price_Pxb3Apply)
            {
                rate.GroupCost.Rates.PaxBreakRate.Price_Pxb3 = rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb3 + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb3 * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.PaxBreakRate.Price_Pxb3 = rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb3 + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb3 * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.PaxBreakRate.Price_Pxb3 = rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb3 + rate.MarkupAmount + ((rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb3 * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.PaxBreakRate.Price_Pxb3 = rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb3 + rate.MarkupAmount + ((rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb3 * rate.MarkupPercent) / 100);
            }
            

            if (rate.GroupCost.Rates.PaxBreakRate.Price_Pxb4Apply)
            {
                rate.GroupCost.Rates.PaxBreakRate.Price_Pxb4 = rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb4 + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb4 * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.PaxBreakRate.Price_Pxb4 = rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb4 + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb4 * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.PaxBreakRate.Price_Pxb4 = rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb4 + rate.MarkupAmount + ((rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb4 * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.PaxBreakRate.Price_Pxb4 = rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb4 + rate.MarkupAmount + ((rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb4 * rate.MarkupPercent) / 100);
            }
            

            if (rate.GroupCost.Rates.PaxBreakRate.Price_Pxb5Apply)
            {
                rate.GroupCost.Rates.PaxBreakRate.Price_Pxb5 = rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb5 + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.PaxBreakRate.Price_Pxb5 * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.PaxBreakRate.Price_Pxb5 = rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb5 + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.PaxBreakRate.Price_Pxb5 * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.PaxBreakRate.Price_Pxb5 = rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb5 + rate.MarkupAmount + ((rateMaster.FITCost.Rates.PaxBreakRate.Price_Pxb5 * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.PaxBreakRate.Price_Pxb5 = rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb5 + rate.MarkupAmount + ((rateMaster.FITSell.Rates.PaxBreakRate.Price_Pxb5 * rate.MarkupPercent) / 100);
            }
            
        }
        if (rate.GroupCost.Rates.RoomRate != null)
        {
            if (rate.GroupCost.Rates.RoomRate.SGApply)
            {
                rate.GroupCost.Rates.RoomRate.SG = rateMaster.GroupCost.Rates.RoomRate.SG + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.RoomRate.SG * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.RoomRate.SG = rateMaster.GroupSell.Rates.RoomRate.SG + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.RoomRate.SG * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.RoomRate.SG = rateMaster.FITCost.Rates.RoomRate.SG + rate.MarkupAmount + ((rateMaster.FITCost.Rates.RoomRate.SG * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.RoomRate.SG = rateMaster.FITSell.Rates.RoomRate.SG + rate.MarkupAmount + ((rateMaster.FITSell.Rates.RoomRate.SG * rate.MarkupPercent) / 100);

            }
            

            if (rate.GroupCost.Rates.RoomRate.TWApply)
            {
                rate.GroupCost.Rates.RoomRate.TW = rateMaster.GroupCost.Rates.RoomRate.TW + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.RoomRate.TW * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.RoomRate.TW = rateMaster.GroupSell.Rates.RoomRate.TW + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.RoomRate.TW * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.RoomRate.TW = rateMaster.FITCost.Rates.RoomRate.TW + rate.MarkupAmount + ((rateMaster.FITCost.Rates.RoomRate.TW * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.RoomRate.TW = rateMaster.FITSell.Rates.RoomRate.TW + rate.MarkupAmount + ((rateMaster.FITSell.Rates.RoomRate.TW * rate.MarkupPercent) / 100);
            }
           

            if (rate.GroupCost.Rates.RoomRate.TRApply)
            {
                rate.GroupCost.Rates.RoomRate.TR = rateMaster.GroupCost.Rates.RoomRate.TR + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.RoomRate.TR * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.RoomRate.TR = rateMaster.GroupSell.Rates.RoomRate.TR + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.RoomRate.TR * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.RoomRate.TR = rateMaster.FITCost.Rates.RoomRate.TR + rate.MarkupAmount + ((rateMaster.FITCost.Rates.RoomRate.TR * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.RoomRate.TR = rateMaster.FITSell.Rates.RoomRate.TR + rate.MarkupAmount + ((rateMaster.FITSell.Rates.RoomRate.TR * rate.MarkupPercent) / 100);
            }
           

            if (rate.GroupCost.Rates.RoomRate.QDApply)
            {
                rate.GroupCost.Rates.RoomRate.QD = rateMaster.GroupCost.Rates.RoomRate.QD + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.RoomRate.QD * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.RoomRate.QD = rateMaster.GroupSell.Rates.RoomRate.QD + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.RoomRate.QD * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.RoomRate.QD = rateMaster.FITCost.Rates.RoomRate.QD + rate.MarkupAmount + ((rateMaster.FITCost.Rates.RoomRate.QD * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.RoomRate.QD = rateMaster.FITSell.Rates.RoomRate.QD + rate.MarkupAmount + ((rateMaster.FITSell.Rates.RoomRate.QD * rate.MarkupPercent) / 100);
            }
            

            if (rate.GroupCost.Rates.RoomRate.AAApply)
            {
                rate.GroupCost.Rates.RoomRate.AA = rateMaster.GroupCost.Rates.RoomRate.AA + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.RoomRate.AA * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.RoomRate.AA = rateMaster.GroupSell.Rates.RoomRate.AA + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.RoomRate.AA * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.RoomRate.AA = rateMaster.FITCost.Rates.RoomRate.AA + rate.MarkupAmount + ((rateMaster.FITCost.Rates.RoomRate.AA * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.RoomRate.AA = rateMaster.FITSell.Rates.RoomRate.AA + rate.MarkupAmount + ((rateMaster.FITSell.Rates.RoomRate.AA * rate.MarkupPercent) / 100);
            }
            
        }

        if (rate.GroupCost.Rates.Extras != null)
        {
            if (rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Apply)
            {
                rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate = rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate = rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate = rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate = rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex1Rate * rate.MarkupPercent) / 100);
            }
           
            if (rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Apply)
            {
                rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate = rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate = rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate = rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate = rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex1Rate * rate.MarkupPercent) / 100);
            }
           
            if (rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Apply)
            {
                rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate = rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate = rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate = rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate = rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex1Rate * rate.MarkupPercent) / 100);
            }
            

            if (rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Apply)
            {
                rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate = rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate = rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate = rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate = rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex2Rate * rate.MarkupPercent) / 100);
            }
           
            if (rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Apply)
            {
                rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate = rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate = rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate = rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate = rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex2Rate * rate.MarkupPercent) / 100);
            }
           
            if (rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Apply)
            {
                rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate = rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate = rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate = rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate = rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex2Rate * rate.MarkupPercent) / 100);
            }
           

            if (rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Apply)
            {
                rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate = rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate = rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate = rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate = rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex3Rate * rate.MarkupPercent) / 100);
            }
           
            if (rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Apply)
            {
                rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate = rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate = rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate = rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate = rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex3Rate * rate.MarkupPercent) / 100);
            }
            
            if (rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Apply)
            {
                rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate = rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate = rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate = rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate = rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex3Rate * rate.MarkupPercent) / 100);
            }
          
            if (rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Apply)
            {
                rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate = rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate = rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate = rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate = rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex4Rate * rate.MarkupPercent) / 100);
            }
           
            if (rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Apply)
            {
                rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate = rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate = rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate = rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate = rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex4Rate * rate.MarkupPercent) / 100);
            }
            
            if (rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Apply)
            {
                rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate = rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate = rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate = rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate = rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex4Rate * rate.MarkupPercent) / 100);
            }

            if (rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Apply)
            {
                rate.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate = rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate = rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate = rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate = rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.AdultExtras.ExtraRates.Ex5Rate * rate.MarkupPercent) / 100);
            }
            
            if (rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Apply)
            {
                rate.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate = rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate = rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate = rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate = rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.ChildExtras.ExtraRates.Ex5Rate * rate.MarkupPercent) / 100);
            }
           
            if (rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Apply)
            {
                rate.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate = rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate + rate.MarkupAmount + ((rateMaster.GroupCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate * rate.MarkupPercent) / 100);
                rate.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate = rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate + rate.MarkupAmount + ((rateMaster.GroupSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate * rate.MarkupPercent) / 100);
                rate.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate = rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate + rate.MarkupAmount + ((rateMaster.FITCost.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate * rate.MarkupPercent) / 100);
                rate.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate = rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate + rate.MarkupAmount + ((rateMaster.FITSell.Rates.Extras.InfantExtras.ExtraRates.Ex5Rate * rate.MarkupPercent) / 100);
            }
           
        }
    }


    string styleRadio = "display: block;height:25px;line-height:25px";
    [Parameter]
    public List<RequestSetRate> AmendData { get; set; }
    bool IsLoading = true;

    IEnumerable<Product> _productList { get; set; } = new List<Product>();

    protected RequestSetRate _obj { get; set; }
    protected DateRange _data { get; set; } = new DateRange();
    protected DateRange _dataMaster { get; set; } = new DateRange();
    bool IsShowForm = false;
    private Form<DateRange> _form = new Form<DateRange>();
    protected GetOptionReplyRoot _optionDetail { get; set; } = new GetOptionReplyRoot();
    protected LoginModel User { get; set; } = new LoginModel();
    protected bool IsDone { get; set; } = false;
    protected List<PriceCode> _priceCodeList = new List<PriceCode>();
    bool IsShowOption = false;
    protected IEnumerable<Product> _selectedProduct { get; set; } = new List<Product>();

    public List<StayPayType> _stayPayTypeList { get; set; } = new List<StayPayType>();

    void ShowCodeList()
    {
        IsShowOption = true;
    }

    void DoSelectOption()
    {
        if (_selectedProduct.Count() > 0)
        {
            _data.OptionCode = _selectedProduct.First().OptionCode;
        }
        IsShowOption = false;
    }
    protected override async Task OnInitializedAsync()
    {
        var userjson = await localStorage.GetAsync<string>("user");
        User = JsonConvert.DeserializeObject<LoginModel>(userjson.Value);

        _priceCodeList = await ap.GetPriceCodeDetail(User.Country);

        _stayPayTypeList.Add(new StayPayType { Id = 2, Name = "First" });
        _stayPayTypeList.Add(new StayPayType { Id = 1, Name = "Last" });
        _stayPayTypeList.Add(new StayPayType { Id = 3, Name = "Lowest" });
    }

    async Task Edit(int id)
    {
        IsShowForm = true;
        _obj = await ds.RequestSetRateById(id);
        if (_obj != null)
        {
            GetOptionRequest rq = new GetOptionRequest();
            rq.User = _obj.Supplier;
            rq.Password = _obj.Supplier;
            rq.OptionCode = _obj.OptionCode;
            rq.Date_From = _obj.Date_From;
            rq.Date_To = _obj.Date_To;


            var getLast6 = _obj.OptionCode.Substring(_obj.OptionCode.Length - 6);
            var optionCode = HttpUtility.HtmlEncode(getLast6.Substring(0, getLast6.Length - 2) + "%3F%3F");
            _productList = await ap.GetOptionList(_obj.Supplier, optionCode, User.Country);

            var getProductFromLast6 = _productList.Where(w => w.Code == getLast6).FirstOrDefault();
            if (getProductFromLast6 != null)
            {
                _selectedProduct.Append(getProductFromLast6);
            }

            _optionDetail = await ap.GetOptionDetail(rq, User.Country);

            _data = JsonConvert.DeserializeObject<DateRange>(_obj.JsonData);

            if (_data.ChargeExtra1 == "Y")
            {
                _data.ChargeEx1_Check = true;
            }
            if (_data.ChargeExtra2 == "Y")
            {
                _data.ChargeEx2_Check = true;
            }
            if (_data.ChargeExtra3 == "Y")
            {
                _data.ChargeEx3_Check = true;
            }
            if (_data.ChargeExtra4 == "Y")
            {
                _data.ChargeEx4_Check = true;
            }
            if (_data.ChargeExtra5 == "Y")
            {
                _data.ChargeEx5_Check = true;
            }
            foreach (var rate in _data.RateSet)
            {
                rate.Stay_Type = HttpUtility.HtmlDecode(rate.Stay_Type);
                rate.Stay_Type2 = HttpUtility.HtmlDecode(rate.Stay_Type2);
                rate.Rate_Text = HttpUtility.HtmlDecode(rate.Rate_Text);
                rate.Rate_Text2 = HttpUtility.HtmlDecode(rate.Rate_Text2);
                if (rate.Apply_Mon == "Y")
                {
                    rate.Apply_Mon_chk = true;
                }
                if (rate.Apply_Tue == "Y")
                {
                    rate.Apply_Tue_chk = true;
                }
                if (rate.Apply_Wed == "Y")
                {
                    rate.Apply_Wed_chk = true;
                }
                if (rate.Apply_Thu == "Y")
                {
                    rate.Apply_Thu_chk = true;
                }
                if (rate.Apply_Fri == "Y")
                {
                    rate.Apply_Fri_chk = true;
                }
                if (rate.Apply_Sat == "Y")
                {
                    rate.Apply_Sat_chk = true;
                }
                if (rate.Apply_Sun == "Y")
                {
                    rate.Apply_Sun_chk = true;
                }
                if (rate.Commissionable == "Y")
                {
                    rate.Commissionable_chk = true;
                }

            }


            _dataMaster = JsonConvert.DeserializeObject<DateRange>(_obj.JsonMaster);
        }
        IsLoading = false;
    }

    void Delete(int id)
    {
        var del = ds.RequestSetRateDelete(id);
        var objremove = AmendData.Where(w => w.Id == id).FirstOrDefault();
        AmendData.Remove(objremove);
    }
    void DoSubmit()
    {
        _form.Submit();
    }

    void DoSave()
    {
        foreach (var rate in _data.RateSet)
        {
            // rate.Stay_Type = HttpUtility.HtmlEncode(rate.Stay_Type);
            // rate.Stay_Type2 = HttpUtility.HtmlEncode(rate.Stay_Type2);
            // rate.Rate_Text = HttpUtility.HtmlEncode(rate.Rate_Text);
            // rate.Rate_Text2 = HttpUtility.HtmlEncode(rate.Rate_Text2);
            rate.Apply_Mon = (rate.Apply_Mon_chk ? "Y" : "N");
            rate.Apply_Tue = (rate.Apply_Tue_chk ? "Y" : "N");
            rate.Apply_Wed = (rate.Apply_Wed_chk ? "Y" : "N");
            rate.Apply_Thu = (rate.Apply_Thu_chk ? "Y" : "N");
            rate.Apply_Fri = (rate.Apply_Fri_chk ? "Y" : "N");
            rate.Apply_Sat = (rate.Apply_Sat_chk ? "Y" : "N");
            rate.Apply_Sun = (rate.Apply_Sun_chk ? "Y" : "N");
            rate.Commissionable = (rate.Commissionable_chk ? "Y" : "N");

        }

        if(_data.ChargeExtra1 != null){
            _data.ChargeExtra1 = (_data.ChargeEx1_Check ? "Y" : "N");
        }
        if(_data.ChargeExtra2 != null){
            _data.ChargeExtra2 = (_data.ChargeEx2_Check ? "Y" : "N");
        }
        if (_data.ChargeExtra3 != null)
        {
            _data.ChargeExtra3 = (_data.ChargeEx3_Check ? "Y" : "N");
        }
        if(_data.ChargeExtra4 != null){
            _data.ChargeExtra4 = (_data.ChargeEx4_Check ? "Y" : "N");
        }
        if(_data.ChargeExtra5 != null){
            _data.ChargeExtra5 = (_data.ChargeEx5_Check ? "Y" : "N");
        }

        _obj.Price_Code = _data.Price_Code;
        _obj.OptionCode = _data.OptionCode;
        _obj.Date_From = _data.Date_From;
        _obj.Date_To = _data.Date_To;
        _obj.LastUpdated = DateTime.Now;

        _obj.JsonData = JsonConvert.SerializeObject(_data);
        ds.RequestSetRateSave(_obj);
        IsShowForm = false;
    }

    async Task DoApprove()
    {
        SetRateRequest rq = new SetRateRequest();
        rq.User = _obj.Supplier;
        rq.Password = _obj.Supplier;
        foreach (var rate in _data.RateSet)
        {
            // rate.Stay_Type = HttpUtility.HtmlEncode(rate.Stay_Type);
            // rate.Stay_Type2 = HttpUtility.HtmlEncode(rate.Stay_Type2);
            // rate.Rate_Text = HttpUtility.HtmlEncode(rate.Rate_Text);
            // rate.Rate_Text2 = HttpUtility.HtmlEncode(rate.Rate_Text2);

            rate.Apply_Mon = (rate.Apply_Mon_chk ? "Y" : "N");
            rate.Apply_Tue = (rate.Apply_Tue_chk ? "Y" : "N");
            rate.Apply_Wed = (rate.Apply_Wed_chk ? "Y" : "N");
            rate.Apply_Thu = (rate.Apply_Thu_chk ? "Y" : "N");
            rate.Apply_Fri = (rate.Apply_Fri_chk ? "Y" : "N");
            rate.Apply_Sat = (rate.Apply_Sat_chk ? "Y" : "N");
            rate.Apply_Sun = (rate.Apply_Sun_chk ? "Y" : "N");
            rate.Commissionable = (rate.Commissionable_chk ? "Y" : "N");

        }
        if (_data.ChargeExtra1 != null)
        {
            _data.ChargeExtra1 = (_data.ChargeEx1_Check ? "Y" : "N");
        }
        if (_data.ChargeExtra2 != null)
        {
            _data.ChargeExtra2 = (_data.ChargeEx2_Check ? "Y" : "N");
        }
        if (_data.ChargeExtra3 != null)
        {
            _data.ChargeExtra3 = (_data.ChargeEx3_Check ? "Y" : "N");
        }
        if (_data.ChargeExtra4 != null)
        {
            _data.ChargeExtra4 = (_data.ChargeEx4_Check ? "Y" : "N");
        }
        if (_data.ChargeExtra5 != null)
        {
            _data.ChargeExtra5 = (_data.ChargeEx5_Check ? "Y" : "N");
        }
        rq.DateRange.Add(_data);
        var ret = await ap.SetRate(rq, User.Country);
        if (ret.ErrorReply != null)
        {

            await _notice.Open(new NotificationConfig()
                {
                    Message = "Error from Tourplan",
                    Description = ret.ErrorReply.Error,
                    NotificationType = NotificationType.Error
                });
        }
        else
        {

            _obj.Price_Code = _data.Price_Code;
            _obj.OptionCode = _data.OptionCode;
            _obj.Date_From = _data.Date_From;
            _obj.Date_To = _data.Date_To;
            _obj.DatePublish = DateTime.Now;
            _obj.PublishBy = User.Username;
            _obj.IsPublish = true;
            AmendData.Remove(_obj);
            IsShowForm = false;
        }
        _obj.JsonData = JsonConvert.SerializeObject(_data);
        ds.RequestSetRateSave(_obj);

    }
    bool _loading = false;

    void Copy(RequestSetRate model)
    {

        var copy = Functions.CloneObject<RequestSetRate>(model);
        copy.Id = 0;
        copy.Status = Status.New;
        ds.RequestSetRateSave(copy);
        AmendData.Add(copy);
    }

    async Task CheckOption()
    {
        GetOptionRequest rq = new GetOptionRequest();
        rq.User = _obj.Supplier;
        rq.Password = _obj.Supplier;
        rq.OptionCode = _data.OptionCode;
        rq.Date_From = _obj.Date_From;
        rq.Date_To = _obj.Date_To;


        var checkOption = await ap.GetOptionDetail(rq, User.Country);
        if (checkOption.GetOptionReply == null || checkOption.GetOptionReply.OptionData.Count == 0 )
        {
            await _message.Error("No OptionCode in Tourplan",5);
            _data.OptionCode = _dataMaster.OptionCode;

        }
        else
        {
            _optionDetail = checkOption;
        }
    }

    void AdultRateCopyTo(RateSet rate)
    {
        rate.GroupSell.Rates.AdultRate = rate.GroupCost.Rates.AdultRate;
    }

    async Task DoCopy(RateSet rate)
    {
        IsLoading = true;

        var newObj = Functions.CloneObject<RateSet>(rate);
        newObj.Stay_Type = newObj.Stay_Type + "(copy)";
        newObj.Rate_Text = newObj.Rate_Text + "(copy)";
      
        _data.RateSet.Add(newObj);

        IsLoading = false;
    }

    async Task DoDelete(RateSet rate)
    {
        IsLoading = true;
        _data.RateSet.Remove(rate);
        IsLoading = false;
    }


    public class StayPayType
    {
        public int Id { get; set; }
        public string Name { get; set; }

    }
}


